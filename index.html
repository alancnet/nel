<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>Node.js Evaluation Loop (NEL)</h1><p><code>NEL</code> is an <a href="https://www.npmjs.com/">npm module</a> for running
<a href="https://nodejs.org/">Node.js</a> REPL sessions.</p>
<p><code>NEL</code> is a spin-off library from
<a href="https://n-riesco.github.io/ijavascript">IJavascript</a>. This fact explains some
of the design decisions in <code>NEL</code> such as returning results in MIME format, and
the functionality provided for completion and inspection of Javascript
expressions.  See the section on usage for more details.</p>
<p>Please, consider this repository as an alpha release. The API is likely to
change.</p>
<h2>Main Features</h2><ul>
<li>Run Javascript code within a <code>Node.js</code> session. The result can be formatted
as:<ul>
<li><a href="http://n-riesco.github.io/ijavascript/doc/hello.ipynb.html">plain text</a></li>
<li><a href="http://n-riesco.github.io/ijavascript/doc/custom.ipynb.html">other MIME
formats</a>
(<code>HTML</code>, <code>SVG</code>, <code>PNG</code>...)</li>
</ul>
</li>
<li>Run Javascript code
<a href="http://n-riesco.github.io/ijavascript/doc/async.ipynb.html">asynchronously</a>.</li>
<li>Generate a list of <a href="http://n-riesco.github.io/ijavascript/doc/complete.md.html">completion
options</a> for an
incomplete piece of Javascript code.</li>
<li><a href="http://n-riesco.github.io/ijavascript/doc/inspect.md.html">Inspect a Javascript
expression</a> and
return information such as type or even documentation (currently, only for
Javascript builtins).</li>
</ul>
<h2>Announcements</h2><ul>
<li><code>NEL</code> is in the process of being refactored to maximise the amount shared
amongst <a href="https://n-riesco.github.io/ijavascript">ijavascript</a>,
<a href="https://github.com/n-riesco/jp-babel">jp-babel</a> and
<a href="https://github.com/n-riesco/jp-coffeescript">jp-coffeescript</a>.</li>
<li><code>NEL v0.5</code>: New API (added transpile option)</li>
<li><code>NEL v0.4</code>: New API (added onStdout and onStderr callbacks)</li>
<li><code>NEL v0.3</code>: New API (simplify API by hiding type module:nel~Task)</li>
<li><code>NEL v0.2</code>: API change (removed Session#executionCount)</li>
<li><code>NEL v0.1.1</code>: New experimental <code>$$mimer$$</code> and <code>$$defaultMimer$$</code></li>
<li><code>NEL v0.1</code>: Output change (changed function output)</li>
<li><code>NEL v0.0</code>: Initial release</li>
</ul>
<h2>Install</h2><pre class="prettyprint source lang-sh"><code>npm install nel</code></pre><h2>Usage</h2><p>The documentation generated by JSDoc can be found
<a href="http://n-riesco.github.io/nel/">here</a>.</p>
<h3>Hello, World!</h3><pre class="prettyprint source lang-js"><code>// Load `nel` module
var nel = require(&quot;nel&quot;);

// Setup a new Javascript session
var session = new nel.Session();

// Example of an execution request
// Output:
// { mime: { 'text/plain': '\'Hello, World!\'' } }
var code = &quot;['Hello', 'World!'].join(', ');&quot;;
session.execute(code, {
    onSuccess: console.log,
    onError: console.error,
});</code></pre><h3>Exceptions</h3><pre class="prettyprint source lang-js"><code>// Example of throwing an exception
// Output:
// { error:
//  { ename: 'Error',
//    evalue: 'Hello, World!',
//    traceback:
//     [ 'Error: Hello, World!',
//       '    at evalmachine.&lt;anonymous>:1:7',
//       '    at run ([eval]:182:19)',
//       '    at onMessage ([eval]:63:41)',
//       '    at process.EventEmitter.emit (events.js:98:17)',
//       '    at handleMessage (child_process.js:318:10)',
//       '    at Pipe.channel.onread (child_process.js:345:11)' ] } }
code = &quot;throw new Error('Hello, World!');&quot;;
session.execute(code, {
    onSuccess: console.log,
    onError: console.error,
});</code></pre><h3><code>stdout</code> and <code>stderr</code></h3><pre class="prettyprint source lang-js"><code>// Example of use of console.log()
// Output:
// Hello, World!
//
// { mime: { 'text/plain': 'undefined' } }
code = &quot;console.log('Hello, World!');&quot;;
session.execute(code, {
    onSuccess: console.log,
    onError: console.error,
    onStdout: console.log,
    onStderr: console.error,
});</code></pre><h3>MIME output</h3><p>A session may return results in MIME formats other than 'text/plain'.</p>
<pre class="prettyprint source lang-js"><code>// HTML example
// Output:
// { mime: { 'text/html': '&lt;div style=\'background-color:olive;width:50px;height:50px\'>&lt;/div>' } }
code = &quot;$$html$$ = \&quot;&lt;div style='background-color:olive;width:50px;height:50px'>&lt;/div>\&quot;;&quot;;
session.execute(code, {
    onSuccess: console.log,
    onError: console.error,
});

// SVG example
// Output:
// { mime: { 'image/svg+xml': '&lt;svg>&lt;rect width=80 height=80 style=\'fill: orange;\'/>&lt;/svg>' } }
code = &quot;$$svg$$ = \&quot;&lt;svg>&lt;rect width=80 height=80 style='fill: orange;'/>&lt;/svg>\&quot;;&quot;;
session.execute(code, {
    onSuccess: console.log,
    onError: console.error,
});

// PNG example
code = &quot;$$png$$ = require('fs').readFileSync('image.png').toString('base64');&quot;;
session.execute(code, {
    onSuccess: console.log,
    onError: console.error,
});

// JPEG example
code = &quot;$$jpeg$$ = require('fs').readFileSync('image.jpg').toString('base64');&quot;;
session.execute(code, {
    onSuccess: console.log,
    onError: console.error,
});

// MIME example
code = &quot;$$mime$$ = {\&quot;text/html\&quot;: \&quot;&lt;div style='background-color:olive;width:50px;height:50px'>&lt;/div>\&quot;};&quot;;
session.execute(code, {
    onSuccess: console.log,
    onError: console.error,
});</code></pre><h3>Generate a completion list</h3><p><code>NEL</code> can parse simple Javascript variable expressions and generate a list of
completion options:</p>
<pre class="prettyprint source lang-js"><code>session.complete(
    &quot;set&quot;,     // code
    3,         // cursorPos
    {
        onSuccess: console.log,
        onError: console.error,
    }
);

// Output:
// { completion:
//    { list: [ 'setImmediate', 'setInterval', 'setTimeout' ],
//      code: 'set',
//      cursorPos: 3,
//      matchedText: 'set',
//      cursorStart: 0,
//      cursorEnd: 3 } }</code></pre><p>Note that the cursor position can be located anywhere within the Javascript
code:</p>
<pre class="prettyprint source lang-js"><code>session.complete(
    &quot;set&quot;,     // code
    2,         // cursorPos
    {
        onSuccess: console.log,
        onError: console.error,
    }
);

// Output:
// { completion:
//    { list: [ 'setImmediate', 'setInterval', 'setTimeout' ],
//      code: 'set',
//      cursorPos: 2,
//      matchedText: 'se',
//      cursorStart: 0,
//      cursorEnd: 3 } }</code></pre><h3>Inspect an expression</h3><p><code>NEL</code> can parse simple Javascript variable expressions and inspect their value:</p>
<pre class="prettyprint source lang-js"><code>code = &quot;var a = [1, 2, 3];&quot;;
session.execute(code, null, onError);
session.inspect(
    code,      // code
    5,         // cursorPos
    {
        onSuccess: console.log,
        onError: console.error,
    }
);

// Output:
// { inspection:
//    { string: '[ 1, 2, 3 ]',
//      type: 'Array',
//      constructorList: [ 'Array', 'Object' ],
//      length: 3,
//      code: 'var a = [1, 2, 3];',
//      cursorPos: 5,
//      matchedText: 'a' } }</code></pre><p><code>NEL</code> can also provide relevant documentation (currently only available for
Javascript builtins):</p>
<pre class="prettyprint source lang-js"><code>session.inspect(
    &quot;parseInt&quot;, // code
    8,          // cursorPos
    {
        onSuccess: console.log,
        onError: console.error,
    }
);

// Output:
// { inspection:
//    { string: '[Function: parseInt]',
//      type: 'Object',
//      constructorList: [ 'Function', 'Object' ],
//      length: 2,
//      code: 'parseInt',
//      cursorPos: 8,
//      matchedText: 'parseInt' },
//   doc:
//    { description: 'The parseInt() function parses a string argument and returns an integer of the specified radix (the base in mathematical numeral systems).',
//      url: 'https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt',
//      usage: 'parseInt(string, radix);' } }</code></pre><h3>Callbacks <code>beforeRun</code> and <code>afterRun</code></h3><pre class="prettyprint source lang-js"><code>var beforeRun = function() { console.log(&quot;This callback runs first&quot;); }
code = &quot;'I run next'&quot;;
var afterRun = function() { console.log(&quot;This callback runs last&quot;); }
session.execute(code, {
    onSuccess: console.log,
    onError: console.error,
    beforeRun: beforeRun,
    afterRun: afterRun,
});

// Output:
// This callback runs first
// { mime: { 'text/plain': '\'I run next\'' } }
// This callback runs last</code></pre><h2>Contributions</h2><p>First of all, thank you for taking the time to contribute. Please, read
<a href="https://github.com/n-riesco/nel/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a>
and use the <a href="https://github.com/n-riesco/nel/issues">issue tracker</a> for
any contributions: support requests, bug reports, enhancement requests, pull
requests, ...</p>
<h2>TODO</h2><ul>
<li>Use Mocha</li>
<li>Add tests for customising output</li>
<li>Add tests for async output</li>
<li>Add tests for transpile option</li>
<li>Add <code>Node.js</code> documentation</li>
</ul></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-nel.html">nel</a></li></ul><h3>Classes</h3><ul><li><a href="module-nel-Session.html">Session</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Sat Feb 04 2017 18:28:33 GMT+0000 (GMT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>